{"mappings":"IAWAA,EAXoBC,MAAOC,EAAYC,EAAMC,KAC3CC,QAAQC,IAAIF,GACZF,EAAWK,IAAI,OAAQJ,GACvBD,EAAWK,IAAI,IAAKH,EAAMI,QAAQ,IAAK,MACvCH,QAAQC,IAAIJ,EAAWO,YACvB,MAAMC,QAAiBC,MACrB,4BAA4BT,EAAWO,cAGzC,aADqBC,EAASE,QCRhC,IAAIC,EAAe,GACnB,MAAMC,EAAUC,SAASC,cAAc,Y,IAYvCC,EAXsB,CAACC,EAASC,EAASC,KACrB,IAAdA,IACFP,EAAe,IAEjB,IAAK,IAAIQ,EAAI,EAAGA,EAAIH,EAAQI,KAAKC,OAAQF,GAAK,EAC5CF,GAAW,IAIb,OAFAN,GAAgBM,EAChBL,EAAQU,UAAYX,EACbM,GCNT,MAAMM,EAAaV,SAASC,cAAc,gBACpCU,EAAcX,SAASC,cAAc,wBACrCW,EAAcZ,SAASC,cAAc,cAE3C,IAAIY,EAAa,EACbC,EAAY,EAChBF,EAAYG,MAAMC,QAAU,OAC5B,IAAIC,EAAW,EACXC,EAAU,GAEd,MAAMC,EAAe,IAAIC,gBAAgB,CACvCC,IAAK,qCACLC,WAAY,QACZC,YAAa,aACbC,WAAY,OACZC,SAAU,KAKZf,EAAWgB,iBAAiB,UAAUC,IACpCA,EAAEC,iBACFf,EAAa,EACbC,EAAY,EACZ7B,EAAYkC,EAAcN,EAAYF,EAAYkB,OAC/CC,MAAKC,IACJd,EAAWc,EAAOC,UAAYD,EAAOxB,KAAKC,OAC1CU,EAAU,GACVhB,EAAc6B,EAAQb,EAASJ,MAEhCmB,OAAMC,GAAS5C,QAAQC,IAAI2C,KAC9BtB,EAAYG,MAAMC,QAAU,UAK9BJ,EAAYc,iBAAiB,SAAS,KAChCZ,GAAaqB,KAAKC,KAAKnB,GAAY,IACrCH,GAAa,EACbD,EAAaC,GAEf7B,EAAYkC,EAAcN,EAAYF,EAAYkB,OAC/CC,MAAKC,IACAjB,IAAcqB,KAAKC,KAAKnB,KAC1BL,EAAYG,MAAMC,QAAU,QAE9B1B,QAAQC,IAAIuB,EAAWiB,EAAOC,UAAYD,EAAOxB,KAAKC,QACtDN,EAAc6B,EAAQb,EAASJ,MAEhCmB,OAAMC,GAAS5C,QAAQC,IAAI2C","sources":["src/js/fetchimages.js","src/js/createMarckup.js","src/index.js"],"sourcesContent":["const fetchImages = async (parameters, page, query) => {\n  console.log(query);\n  parameters.set('page', page);\n  parameters.set('q', query.replace(' ', '+'));\n  console.log(parameters.toString());\n  const response = await fetch(\n    `https://pixabay.com/api/?${parameters.toString()}`\n  );\n  const images = await response.json();\n  return images;\n};\nexport default fetchImages;\n","let marckupTotal = '';\nconst gallery = document.querySelector('.gallery');\nconst createMarckup = (imgList, marckup, pageCount) => {\n  if (pageCount === 1) {\n    marckupTotal = '';\n  }\n  for (let i = 0; i < imgList.hits.length; i += 1) {\n    marckup += `1`;\n  }\n  marckupTotal += marckup;\n  gallery.innerHTML = marckupTotal;\n  return marckup;\n};\nexport default createMarckup;\n","// API KEY 30336513-f1d3dcf5d3b6560ebccde30e0\n\nimport fetchImages from './js/fetchimages';\nimport createMarckup from './js/createMarckup';\n\nconst searchForm = document.querySelector('.search-form');\nconst searchQuery = document.querySelector('[name=\"searchQuery\"]');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet pageNumber = 1;\nlet pageCount = 1;\nloadMoreBtn.style.display = 'none';\nlet maxPages = 1;\nlet marckup = '';\n\nconst searchParams = new URLSearchParams({\n  key: '30336513-f1d3dcf5d3b6560ebccde30e0',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: 'true',\n  per_page: 40,\n});\n\n//GET IMAGES LIST\n\nsearchForm.addEventListener('submit', e => {\n  e.preventDefault();\n  pageNumber = 1;\n  pageCount = 1;\n  fetchImages(searchParams, pageNumber, searchQuery.value)\n    .then(images => {\n      maxPages = images.totalHits / images.hits.length;\n      marckup = '';\n      createMarckup(images, marckup, pageCount);\n    })\n    .catch(error => console.log(error));\n  loadMoreBtn.style.display = 'flex';\n});\n\n//LOAD MORE IMAGES\n\nloadMoreBtn.addEventListener('click', () => {\n  if (pageCount <= Math.ceil(maxPages) - 1) {\n    pageCount += 1;\n    pageNumber = pageCount;\n  }\n  fetchImages(searchParams, pageNumber, searchQuery.value)\n    .then(images => {\n      if (pageCount === Math.ceil(maxPages)) {\n        loadMoreBtn.style.display = 'none';\n      }\n      console.log(pageCount, images.totalHits / images.hits.length);\n      createMarckup(images, marckup, pageCount);\n    })\n    .catch(error => console.log(error));\n});\n"],"names":["$d13d1c5eababd4e8$export$2e2bcd8739ae039","async","parameters","page","query","console","log","set","replace","toString","response","fetch","json","$1056e7dbd0737d64$var$marckupTotal","$1056e7dbd0737d64$var$gallery","document","querySelector","$1056e7dbd0737d64$export$2e2bcd8739ae039","imgList","marckup","pageCount","i","hits","length","innerHTML","$1f0dc3b9307be026$var$searchForm","$1f0dc3b9307be026$var$searchQuery","$1f0dc3b9307be026$var$loadMoreBtn","$1f0dc3b9307be026$var$pageNumber","$1f0dc3b9307be026$var$pageCount","style","display","$1f0dc3b9307be026$var$maxPages","$1f0dc3b9307be026$var$marckup","$1f0dc3b9307be026$var$searchParams","URLSearchParams","key","image_type","orientation","safesearch","per_page","addEventListener","e","preventDefault","value","then","images","totalHits","catch","error","Math","ceil"],"version":3,"file":"index.a971cff1.js.map"}